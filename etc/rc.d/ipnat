#!/bin/sh
#
# $FreeBSD: src/etc/rc.d/ipnat,v 1.15.4.1 2008/01/28 07:58:31 dougb Exp $
# $MidnightBSD: src/etc/rc.d/ipnat,v 1.2 2006/08/28 02:47:45 laffer1 Exp $

# PROVIDE: ipnat
# REQUIRE: ipfilter
# BEFORE:  DAEMON netif
# KEYWORD: nojail

. /etc/rc.subr

name="ipnat"
rcvar=`set_rcvar`
load_rc_config $name
start_cmd="ipnat_start"
stop_cmd="${ipnat_program} -F -C"
reload_cmd="${ipnat_program} -F -C -f ${ipnat_rules}"
extra_commands="reload"
required_files="${ipnat_rules}"
required_modules="ipl:ipfilter"

ipnat_start()
{
	echo "Installing NAT rules."
	${ipnat_program} -CF -f ${ipnat_rules} ${ipnat_flags}
}

run_rc_command "$1"
