<!--
	The FreeBSD Russian Documentation Project

	$FreeBSD: src/release/doc/ru_RU.KOI8-R/installation/common/trouble.sgml,v 1.5 2005/06/30 11:35:03 den Exp $
	$FreeBSDru: frdp/release/doc/ru_RU.KOI8-R/installation/common/trouble.sgml,v 1.5 2005/06/30 11:12:32 den Exp $

	Original revision: 1.19

	This file contains the comments of the old TROUBLE.TXT file.
-->
<sect1 id="trouble">
  <title>Решение проблем</title>

  <sect2 id="repairing">
    <title>Восстановление существующей установки &os;</title>

    <para>&os; предоставляет опцию <quote>fixit</quote> в главном меню
      программы установки &man.sysinstall.8;.  Опция открывает
      командную строку, из которой доступны основные программы базовой
      системы &os;; эта опция полезна для восстановления или решения
      проблем существующей установке &os;.  Для использования режима
      fixit вам потребуется либо дискета <filename>fixit.flp</filename>,
      созданная таким же образом, как и загрузочные дискеты, или
      компакт-диск с <quote>live filesystem</quote>.  В многодисковых
      наборах &os;, образ live filesystem обычно находится на диске с
      установкой.  Обратите внимание, что для использования режима
      fixit требуется некоторый опыт системного администрирования
      UNIX.</para>

    <para>Есть два стандартных способа войти в режим fixit.  Пользователи,
      которые могут загрузиться с установочного компакт-диска &os;,
      могут воспользоваться пунктом <quote>fixit</quote> из главного
      меню &man.sysinstall.8;.  Затем нужно выбрать опцию
      этого меню <quote>CDROM/DVD</quote>.</para>

    <para>Пользователям, которые не могут загрузиться с компакт-диска,
      но могут загрузиться с дискет, потребуется выполнить несколько больше
      шагов.  В дополнение к дискетам <filename>boot.flp</filename> и
      <filename>kern<replaceable>X</replaceable>.flp</filename>,
      необходимым для установки, создайте дискету
      <filename>fixit.flp</filename>, тем же способом, что и другие
      дискеты.  Следуйте инструкциям по загрузке программы установки
      с дискет до момента входа в меню &man.sysinstall.8;.  После этого
      выберите опцию <quote>fixit</quote> из главного меню
      &man.sysinstall.8;.  Затем выберите опцию <quote>Floppy</quote>
      и вставьте дискету <filename>fixit.flp</filename>, когда
      появится соответствующее приглашение.</para>

    <para>Содержимое компакт-диска и дискеты похожи, но не идентичны.
      В обеих случаях предоставляется командная строка с набором
      команд для проверки, восстановления файловых систем и их
      содержимого.  Версия на компакт-диске предоставляет посредством
      live filesystem весь набор команд и программ, доступных в базовой
      системе &os;.  На дискете находится ограниченный набор
      команд, вследствие ограничений по объему.</para>

    <para>В версии на дискете, некоторые утилиты могут находиться в
      каталоге <filename>/stand</filename>, или
      <filename>/mnt2/stand</filename>.  В версии на компакт диске, те же
      программы могут находиться в каталоге <filename>/stand</filename>
      или <filename>/mnt2/rescue</filename> (вместе с другими программами
      из live filesystem, которые расположены в
      <filename>/mnt</filename>).</para>

  </sect2>

  <sect2>
    <title>Проблемы, с которыми наиболее часто сталкиваются пользователи
      архитектуры &arch.print;</title>

    <qandaset arch="i386">
      <qandaentry>
	<question>
	  <para>Моя система подвисает при тестировании оборудования,
	    или странно ведет себя во время загрузки, или дисковод
	    не тестируется.</para>
	</question>
	<answer>
	  <para>&os; 5.0 и выше использует системный сервис ACPI платформы
	    i386, amd64 и ia64 для получения системной конфигурации, если этот сервис
	    обнаружен во время загрузки.  К сожалению, в драйвере ACPI,
	    материнских платах и BIOS все еще присутствуют некоторые ошибки.
	    Использование ACPI может быть выключено установкой
	    переменной <quote>hint.acpi.0.disabled</quote> на третьей
	    стадии загрузки:</para>

	  <screen>set hint.acpi.0.disabled="1"</screen>

	  <para>Эта переменная сбрасывается во время загрузки, поэтому
	    необходимо добавить <literal>hint.acpi.0.disabled="1"</literal>
	    в файл <filename>/boot/loader.conf</filename>.  Дальнейшая
	    информация по загрузчику находится в Руководстве &os;.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386,pc98,alpha,sparc64">
	<question>
	  <para>ISA устройство, определявшееся в предыдущих версиях
	    &os;, теперь не определяется.  Что случилось?</para>
	</question>
	<answer>
	  <para>Некоторые драйвера устройств, такие как matcd, были удалены
	    вследствие недостатка поддержки или по другим причинам.  Другие
	    все еще присутствуют, но отключены, поскольку вызывают проблемы
	    при тестировании устройств.  Следующие драйвера ISA устройств
	    попадают в эту категорию и могут быть вновь включены на третьей
	    стадии загрузки: aha, ahv, aic, bt, ed, cs, sn, ie, fe, le, и lnc.
	    Для их включения остановите загрузчик во время 10-ти секундного
	    отсчета и введите в приглашение:</para>

	  <screen>unset hint.foo.0.disabled</screen>

	  <para>где <replaceable>foo</replaceable> это имя драйвера, который
	    требуется включить.  Эта переменная может быть выключена постоянно
	    путем редактирования файла <filename>/boot/device.hints</filename>
	    и удаления соответствующей записи <quote>disabled</quote>.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>После установки &os; я первый раз загружаюсь с жесткого
	    диска, ядро загружается и тестирует устройства, но останавливается
	    с сообщением вида:</para>

	  <screen>changing root device to ad1s1a panic: cannot mount root</screen>
	  <para>Что не так?  Что я могу сделать?</para>

	  <para>Что за строка
	    <literal>bios_drive:interface(unit,partition)kernel_name</literal>,
	    появляющаяся в boot help?</para>
	</question>
	<answer>
	  <para>Это давно существующая проблема, возникающая если
	    загрузочный диск не является первым диском системы.
	    BIOS использует схему нумерации дисков, отличающуюся от
	    нумерации в &os;, и правильное сопоставление этих номеров
	    &mdash; сложная задача.</para>

	  <para>В случае, когда загрузочный диск это не первый диск системы,
	    &os; требуется некоторая помощь чтобы найти его.  Существует
	    две распространенных ситуации, и в обеих вам потребуется
	    сообщить &os; где находится корневая файловая система.
	    Сделайте это, указав номер диска в BIOS, тип диска и номер
	    диска этого типа в &os;.</para>

	  <para>В первой ситуации имеются два IDE диска, каждый настроен
	    как основной на своей шине IDE, и загружать &os; нужно со второго
	    диска.  BIOS видит их как диск 0 и диск 1, а &os; видит их
	    как <devicename>ad0</devicename>
	    <devicename>ad2</devicename>.</para>

	  <para>&os; находится на диске 1 по нумерации BIOS, тип
	    <literal>ad</literal> и &os; нумерация диска 2, наберите:</para>

	  <screen><userinput>1:ad(2,a)kernel</userinput></screen>

	  <para>Обратите внимание, что если на первой шине есть вторичный
	    диск, вышеприведенный пример не нужен (и неверен).</para>

	  <para>Вторая ситуация относится к загрузке со SCSI диска,
	    когда в системе имеются один или более IDE дисков.
	    В этом случае номер диска в &os; меньше, чем номер диска
	    в BIOS.  Если у вас есть два IDE диска и SCSI диск,
	    в BIOS диск SCSI будет под номером два; наберите
	    <literal>da</literal> и &os; номер диска 0, т.е.:</para>

	  <screen><userinput>2:da(0,a)kernel</userinput></screen>

	  <para>чтобы сообщить &os;, что вы хотите загружаться с диска
	    BIOS номер 2, являющимся первым SCSI диском системы.
	    если у вас только один IDE диск, используйте вместо этого
	    <quote>1:</quote>.</para>

	  <para>Как только вы определили значения, которые необходимо
	    использовать, поместите эти команды точно так же, как они
	    набирались, в файл <filename>/boot.config</filename>,
	    используя стандартный текстовый редактор.  Если не будет
	    других указаний, &os; использует содержимое этого файла
	    в качестве ответа по умолчанию на приглашение
	    <literal>boot:</literal>.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>Я начинаю первую загрузку с жесткого диска после установки
	    &os;, но Boot Manager отображает в меню загрузки только
	    <literal>F?</literal> и загрузка останавливается.</para>
	</question>
	<answer>
	  <para>При установке &os; геометрия жесткого диска в
	    Partition editor была выбрана неправильно.  Вернитесь в
	    Partition editor и укажите правильную геометрию жесткого
	    диска.  Вы должны переустановить &os; еще раз после
	    указания правильной геометрии.</para>

	  <para>Если вы не можете определить правильную геометрию,
	    вот подсказка: создайте небольшой раздел DOS в начале диска
	    и установите &os; после него.  Программа установки увидит
	    раздел DOS и попробует определить правильную геометрию из
	    него, обычно это работает.</para>

	  <para>Следующий способ более не рекомендуется, но оставлен
	    для информации:</para>

	  <blockquote>
	    <para>Если вы настраиваете выделенный сервер &os; или рабочую
	      станцию, на которой вам (в будущем) не понадобится
	      совместимость с DOS, Linux или другой операционной системой,
	      вы можете также использовать параметр использования
	      всего диска (<quote>A</quote> в редакторе разделов),
	      это нестандартный параметр, когда &os; занимает весь диск,
	      от самого первого до самого последнего сектора.  Все соглашения
	      о геометрии не будут действовать, но использование этого метода
	      ограничено, поскольку с этим диском не сможет работать ни одна
	      другая операционная система.</para>
	  </blockquote>
 	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>Драйвер &man.mcd.4; считает, что нашел устройство и
	    мешает работе карты Intel EtherExpress.</para>
	</question>
	<answer>
	  <para>Установите переменные <quote>hint.mcd.0.disabled="1"</quote>
	    и <quote>hint.mcd.1.disabled="1"</quote> на третьей стадии
	    загрузчика для отмены тестирования
	    устройств <devicename>mcd0</devicename> и
	    <devicename>mcd1</devicename>.  Вообще говоря, вы должны
	    оставить включенными только те устройства, которые
	    вы будете использовать.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>Система находит карту &man.ed.4; но я продолжаю получать
	    ошибки device timeout.</para>
	</question>
	<answer>
	  <para>Возможно, карта находится не на том IRQ, которое
	    указано в файле <filename>/boot/device.hints</filename>.
	    Драйвер ed по умолчанию не
	    использует <quote>программную</quote> конфигурацию (значения,
	    вводимые с помощью EZSETUP в DOS), но он будет использовать
	    программную настройку, если вы укажете <literal>-1</literal> в
	    хинтах интерфейса.</para>

	  <para>Или переместите перемычку на карте для жесткого задания
	    настроек (изменив настройки ядра если потребуется), или
	    задайте IRQ <literal>-1</literal> путем установки
	    <quote>hint.ed.0.irq="-1"</quote>.  Это укажет
	    ядру использовать программную конфигурацию.</para>

	  <para>Возможно, ваша карта находится на IRQ 9, которое совместно
	    используется с IRQ 2, что часто вызывает проблемы (особенно
	    если ваша VGA карта использует IRQ 2!).  Вы не должны использовать
	    IRQ 2 или 9 если это возможно.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>Я загрузил с установочной дискеты лэптоп IBM ThinkPad (tm)
	    и клавиатура работает неправильно.</para>
	</question>
	<answer>
	  <para>Старые лэптопы IBM используют нестандартный контроллер
	    клавиатуры, поэтому вы должны сообщить драйверу клавиатуры
	    (atkbd0) перейти в специальный режим, работающий на
	    ThinkPad.  Установите хинт <quote>hint.atkbd.0.flags="4"</quote>
	    и все должно заработать отлично.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386,pc98,alpha,sparc64">
	<question>
	  <para>Моя система не может найти карту Intel EtherExpress 16.</para>
	</question>
	<answer>
	  <para>Вы должны настроить карту Intel EtherExpress 16 на отображение
	    в памяти с адреса 0xD0000, и установить объем отображаемой
	    памяти в 32K используя поставляемую Intel программу
	    <filename>softset.exe</filename>.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>При установке на EISA HP Netserver, встроенный SCSI
	    контроллер AIC-7xxx не обнаруживается.</para>
	</question>
	<answer>
	  <para>Это известная проблема, она вероятно будет исправлена
	    в будущем.  Для того, чтобы вообще установить систему,
	    установите хинт <quote>hw.eisa_slots="12"</quote> на
	    третьей стадии загрузчика.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>У меня компьютер Panasonic AL-N1 или Rios Chandler Pentium
	    и система подвисает не начав установку.</para>
	</question>
	<answer>
	  <para>Ваш компьютер не понимает новый код
	    <literal>i586_copyout</literal> и
	    <literal>i586_copyin</literal>.  Установите хинт
	    <quote>hint.npx.0.flags="1"</quote>.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>У меня есть CMD640 IDE контроллер и он не работает.</para>
	</question>
	<answer>
	  <para>&os; не поддерживает этот контроллер.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>При установке с дискет на ноутбуке Compaq Aero, я получаю
	    сообщение <quote>No floppy devices found!  Please check
	    ...</quote>.</para>
	</question>
	<answer>
	  <para>Compaq немного отличаются от других систем, они не
	    анонсируют гибкий диск в CMOS RAM ноутбука Aero.
	    Следовательно, драйвер дисковода считает, что нет
	    подключенных дисководов.  Установите хинт
	    <quote>hint.fdc.0.flags="1"</quote>.
	    Это значение сообщает драйверу о наличии первого
	    дисковода (как 1.44 MB диск) без запроса к CMOS.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>При установке на Dell Poweredge XE,
	    RAID контроллер Dell DSA (Dell SCSI Array) не
	    распознается.</para>
	</question>
	<answer>
	  <para>Настройте DSA для использования AHA-1540 эмуляции через
	    утилиту настройки EISA.  После этого &os; обнаружит
	    DSA как Adaptec AHA-1540 SCSI контроллер с irq 11 и
	    портом 340.  В режиме эмуляции система будет использовать
	    DSA RAID диски, но вы не сможете использовать характерные
	    возможности DSA, например наблюдение за состоянием RAID.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>У меня есть IBM EtherJet PCI карта, она корректно
	    определяется драйвером &man.fxp.4;, но индикаторы на
	    карте не зажигаются и подключения к сети нет.</para>
	</question>
	<answer>
	  <para>Мы не знаем почему это случается.  IBM тоже не знает
	    (мы спрашивали их).  Эта карта &mdash; стандартная
	    Intel EtherExpress Pro/100 с наклейкой IBM, и эти карты
	    обычно нормально работают.  Вы можете увидеть такие симптомы
	    только в некоторых IBM Netfinity серверах.  Единственным
	    решением является установка другого Ethernet адаптера.</para>
	</answer>
      </qandaentry>
      <qandaentry arch="i386">
	<question>
	  <para>Когда я настраиваю сеть во время установки на IBM Netfinity
	    3500, система подвисает.</para>
	</question>
	<answer>
	  <para>Это проблема с встроенным Ethernet в
	    Netfinity 3500, которую мы не можем решить на данный момент.
	    Она может относиться к неправильной настройке SMP в
	    этой системе.  Вам потребуется установить другой
	    Ethernet адаптер и предотвратить любые попытки настройки
	    встроенного адаптера.</para>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>Когда я устанавливаю систему на диск, управляемый Mylex PCI
	    RAID контроллером, система не может загрузиться (например,
	    с сообщением <literal>read error</literal>).</para>
	</question>
	<answer>
	  <para>Это ошибка в драйвере Mylex, которая приводит к игнорированию
	    установки в BIOS режима геометрии <quote>8GB</quote>.
	    Используйте режим 2GB.</para>
	</answer>
      </qandaentry>
    </qandaset>
  </sect2>
</sect1>
