<!--
     The FreeBSD Simplified Chinese Project

     Original revision: 1.883.2.15.2.7
-->
<articleinfo>
  <title>&os;/&arch; &release.current; 发行说明</title>

  <corpauthor>The &os; Project</corpauthor>

  <pubdate>$FreeBSD: src/release/doc/zh_CN.GB2312/relnotes/common/new.sgml,v 1.5.2.6.2.3 2006/05/06 16:53:40 delphij Exp $</pubdate>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <year>2005</year>
    <year>2006</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <legalnotice id="trademarks" role="trademarks">
    &tm-attrib.freebsd;
    &tm-attrib.ibm;
    &tm-attrib.ieee;
    &tm-attrib.intel;
    &tm-attrib.sparc;
    &tm-attrib.general;
  </legalnotice>

  <abstract>
    <para>这份 &os; &release.current; 的发行说明， 概括了 &os; 基本系统在
      &release.branch; 开发线上所做的改动。
      本文档列举了自前一发行版本以来所有适用的安全公告， 以及对于
      &os; 内核以及系统附带的应用程序所做的重要修改。
      对在升级时需要注意的一些问题， 也进行了简略的介绍。</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>简介</title>

  <para>这篇文档包括了在 &arch.print; 硬件平台上 &os;
    &release.current; 的发行说明。 它描述了最近刚刚加入、修改或删除了的
    &os; 特性的说明。 同时，它也将给出如何从先前的 &os; 版本完成升级的说明。</para>

<![ %release.type.current [

  <para>这篇文档所介绍的 &release.type; 软件包，
    介绍了 &release.branch; 开发分支自 &release.branch;
    创建以来的进展。 关于这一分支上预编译的、 二进制版本的
    &release.type; 软件包， 可以在 <ulink url="&release.url;"></ulink>
    找到。</para>

]]>

<![ %release.type.snapshot [

  <para>这份说明所说的 &release.type; 版本，
    是在 &release.branch; 开发分支上 &release.prev; 到未来的 &release.next;
    上的一点。 这一开发分支上预编译的二进制形式的 &release.type;
    安装包， 可以在 <ulink url="&release.url;"></ulink> 找到。</para>

]]>

<![ %release.type.release [

  <para>这是一份 &os; &release.current; 的
    &release.type; 发布包。 您可以从 <ulink
    url="&release.url;"></ulink> 或其他镜像那里得到它的副本。
    关于这个 (或其他) &release.type; 发布包的更多信息，可以在
    <ulink url="&url.books.handbook;/">&os; 手册</ulink>
    中的 <ulink url="&url.books.handbook;/mirrors.html"><quote>如何获得
    &os;</quote>附录</ulink> 中找到。</para>

]]>

  <para>我们鼓励所有的用户在开始安装 &os; 之前首先参考这一版本所对应的勘误信息。
    勘误文档将随时更新，以便为用户提供在发布工程后期或该版本发布之后
    <quote>新发现的</quote> 问题和相关信息。
    通常，这包括已知的 bug，安全公告，以及对于文档的修订内容。
    最新的 &os; &release.current; 勘误信息可以从 &os; 网站获得。</para>

</sect1>

<sect1 id="new">
  <title>最新变动</title>

  <para>这一节描述了
    &os; 自 &release.prev; 以来最明显的新功能和变化。</para>

  <para>发行说明中的绝大多数条目是在说明自从
    &release.prev;
    以来的安全公告、新的驱动程序或硬件支持、新的命令或是选项、
    重要的错误修补，以及基本系统中来自第三方的软件升级。
    重要的 ports 和 packages 变动，或关于交付工程的变动也会在这份文档中体现。
    显而易见地，发行说明不可能涵盖 &os; 版本之间的每一个微小变动；
    这篇文档主要关注的，仍然是安全公告，用户可以察觉的修改，
    以及重要的架构改良。</para>

  <sect2 id="security">
    <title>安全公告</title>

    <para>在 &man.texindex.1; 中发现并修正了一处临时文件漏洞，
      这一漏洞可能导致本地的攻击者以运行 &man.texindex.1; 工具的用户身份覆盖文件。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc">FreeBSD-SA-06:01.texindex</ulink>。</para>

    <para>在 &man.ee.1; 中发现并修正了一处临时文件漏洞，
      这一漏洞可能导致本地的攻击者以运行 &man.ee.1; 的用户身份覆盖文件。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc">FreeBSD-SA-06:02.ee</ulink>。</para>

    <para>发现并修正了 &man.cpio.1; 工具中的一系列漏洞。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc">FreeBSD-SA-06:03.cpio</ulink>。</para>

    <para>发现并修正了 &man.ipfw.4; IP 分片处理部分的一处可能导致崩溃的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:04.ipfw.asc">FreeBSD-SA-06:04.ipfw</ulink>。</para>

    <para>发现并修正了 IEEE 802.11 扫描代码中的一处潜在的缓冲区溢出问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:05.80211.asc">FreeBSD-SA-06:05.80211</ulink>。</para>

    <para>发现并修正了两个可能导致一部分内核内存被泄露给用户的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:06.kmem.asc">FreeBSD-SA-06:06.kmem</ulink>。</para>

    <para>发现并修正了 &man.pf.4; 中 IP 分片处理过程中一个可能导致在特定情况下崩溃的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:07.pf.asc">FreeBSD-SA-06:07.pf</ulink>。</para>

    <para>发现并修正了 NFS 服务器代码中一处可能导致在服务器收到长度为零的消息时崩溃的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:10.nfs.asc">FreeBSD-SA-06:10.nfs</ulink>。</para>

    <para>发现并修正了 &man.fast.ipsec.4; 实现中的一处可能导致安全关联序号无法更新，
      进而导致数据包无条件地通过序号验证检查的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:11.ipsec.asc">FreeBSD-SA-06:11.ipsec</ulink>。</para>

    <para>发现并修正了 &man.opiepasswd.1; 中的一处可能导致非特权用户，
      能够在某些情况下为 root 用户配置 OPIE 身份验证的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:12.opie.asc">FreeBSD-SA-06:12.opie</ulink>。</para>

    <para>发现并修正了 &man.sendmail.8; 中的一项可能导致远程攻击者以执行
      sendmail 的用户， 通常是 <username>root</username> 身份执行任意代码的问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:13.sendmail.asc">FreeBSD-SA-06:13.sendmail</ulink>。</para>

    <para>发现并修正了在 AMD 第7和第8代处理器上运行的 FreeBSD 内核的一处信息泄露问题。
      要了解进一步详情， 请参阅安全公告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:14.fpu.asc">FreeBSD-SA-06:14.fpu</ulink>。</para>

  </sect2>

  <sect2 id="kernel">
    <title>对内核的改动</title>

    <para>&man.ddb.4; 调试器新增了 <literal>show lock</literal>
      命令。 参数为有效的锁类时， 这一命令会显示关于锁的多种信息，
      并调用在 lock_class 中新增的函数指针 (lc_ddb_show)
      来显示关于锁的其他信息 (例如 mutex 的持有者， 或
      xlock 的 sx 锁)。</para>

    <para>加入了针对不同平台的 <filename>DEFAULTS</filename>
      内核配置文件。</para>

    <para>新增了 &man.firmware.9; 子系统。 它能够使用特制的模块，
      将二进制数据加载到内核中。</para>

    <para>&man.random.4; 熵设备驱动程序是 MPSAFE 的了。</para>

    <para>新增了 sysctl 变量 <varname>security.mac.biba.interfaces_equal</varname>，
      用于配置是否以标签
      <literal>biba/equal(equal-equal)</literal> 创建所有网络接口。
      这对于类似 &man.dhclient.8; 和 &man.ppp.8; 这样需要初始化网络接口，
      但又不提供标签支持的程序非常有用。 默认情况下，
      此变量的值为 <literal>0</literal>(禁用)。</para>

    <!-- Above this line, sort kernel changes by manpage/keyword-->

    <sect3 id="boot">
      <title>引导区和 loader 的变化</title>

      <para arch="i386,amd64">新增了 loader 变量
	<varname>comconsole_speed</varname> 用以调整串口速率。
	如果前一阶段中引导加载器要求使用串口控制台，
	则默认的速率会根据当前的串口速率确定， 否则将设为 9600
	或编译时配置的内核选项 <literal>BOOT_COMCONSOLE_SPEED</literal>
	所指定的值。</para>

      <!-- Above this line, order boot loader changes by keyword-->

    </sect3>

    <sect3 id="proc">
      <title>硬件支持</title>

      <para>&man.acpi.thermal.4; 驱动现在支持被动降温了。</para>

      <para arch="i386,pc98">新增了 &man.ce.4; 驱动， 这一驱动用于支持
	Cronyx Tau-PCI/32 适配器。</para>

      <para>&man.kbdmux.4; 驱动已经集成到了 &man.syscons.4; 和
	<devicename>kbd</devicename> 设备驱动程序中。
	默认情况下 &man.syscons.4; 会首先查找 &man.kbdmux.4;
	键盘， 如果找不到则搜索其他键盘。 切换到 &man.kbdmux.4;
	可以在启动时通过使用 &man.loader.8; 来加载
	<literal>kbdmux</literal> 内核模块，
	或在运行状态通过 &man.kldload.8; 加载模块并移去当前键盘来完成。
	</para>

      <para arch="amd64,i386">&man.kbdmux.4; 驱动已被加入默认的
	<filename>GENERIC</filename> 内核。
	此外， 由于这一变动修正了 USB 键盘探测问题，
	因此引导加载器菜单中的 <quote>Boot FreeBSD with USB keyboard</quote>
	选项也随之删去。</para>

      <sect4 id="mm">
	<title>多媒体支持</title>

	<para>&man.agp.4; 驱动现在支持 ATI IGP 芯片组了。</para>

	<para>对 &man.sound.4; 驱动进行了全方位的更新，
	  包括修正了在先前版本的系统中存在的一系列与锁有关，
	  可能导致系统崩溃的缺陷， 并带来了一些性能上的改善。
	  此外， 这一驱动现在也支持更为广泛的采样速率、
	  多种可选的采样精度， 以及 24/32-位 PCM 格式的转换了。</para>

	<para>&man.snd.atiixp.4; 驱动支持挂起和恢复功能了。</para>

	<para>&man.snd.als4000.4; 驱动是 MPSAFE 的了。</para>

	<para>&man.snd.es137x.4; 驱动是 MPSAFE 的了。</para>

	<para>&man.snd.ich.4; 驱动是 MPSAFE 的了。</para>

	<para>&man.snd.solo.4; 驱动是 MPSAFE 的了。</para>

	<para arch="amd64">The &man.speaker.4; 支持 &os;/amd64 了。</para>

	<para>&man.snd.via8233.4; 驱动是 MPSAFE 的了。</para>

	<para>&man.snd.via82c686.4; 驱动是 MPSAFE 的了。</para>

      </sect4>

      <sect4 id="net-if">
	<title>网络接口设备支持</title>

	<para>&man.ath.4; 驱动更新到了 0.9.16.16 版。</para>

	<para arch="i386,amd64">新增了 &man.bce.4; 驱动， 用以支持 Broadcom
	  NetXtreme II (BCM5706/BCM5708) PCI/PCIe 千兆以太网控制器。
	  进一步详情请参考 &man.bce.4;。</para>

	<para>修正了导致 &man.bfe.4; 驱动无法在配有 1GB 以上 RAM
	  的系统上正常工作的问题。</para>

	<para>&man.bge.4; 驱动提供了 &man.polling.4; 模式的支持。</para>

	<para>&man.em.4; 驱动支持类似 sparc64 这样的 big-endian
	  架构了。</para>

	<para>新增了 &man.le.4; 驱动， 这一驱动支持 AMD Am7900 LANCE
	  和 Am79C9xx PCnet 网络接口控制器， 它基于 NetBSD 的实现。
	  尽管 &man.lnc.4; 驱动也支持这些网络接口控制器，
	  这一驱动提供了许多额外的特性， 例如
	  MPSAFE、 ALTQ、 VLAN_MTU、 ifmedia， 以及 PCI 变体的 32-位 DMA。</para>

	<para>&man.lge.4; 驱动是 MPSAFE 的了。</para>
      </sect4>
    </sect3>

    <sect3 id="net-proto">
      <title>网络协议</title>

      <para>对 &man.arp.8; 重传算法进行了重写，
	使得在需要某一 ARP 项时， 不再抑制重传 ARP 请求。 sysctl 变量
	<varname>net.link.ether.inet.host_down_time</varname>
	也因此消失了。</para>

      <para>&man.arp.8; 新增了 sysctl 变量，
	<varname>net.link.ether.inet.log_arp_permanent_modify</varname>
	以抑制对永久 ARP 项的修改尝试的日志记录。</para>

      <para>&man.if.bridge.4; 网桥驱动新增了创建镜像口， 即，
	将网桥接收到的每个帧都发送到那个端口的支持。
	这一功能可以通过 &man.ifconfig.8; 启用。</para>

      <para>&man.if.bridge.4; 网桥驱动新增了对
	RFC 3378 EtherIP 的支持。 这一变动使得向网桥增加 &man.gif.4;
	接口， 并收发 IP 协议 97 的数据包成为可能。 这些包实际上是附带了 EtherIP
	包头的以太网帧。</para>

      <para>&man.ipfw.4; 的 IP 包过滤器现在支持 IPv6 了。
	&man.ip6fw.8; 包过滤器已经过时， 并将在以后的发行版中删除。</para>

      <para>&man.ipfw.4; 新增了对于由查表得到的值所对应的动作进行替换的功能，
	这一功能可以用来优化规则集。 目前，
	该功能只能用于 <literal>pipe</literal>、
	<literal>queue</literal>、
	<literal>divert</literal>、
	<literal>tee</literal>、
	<literal>netgraph</literal>
	以及 <literal>ngtee</literal> 规则。
	例如， 下列规则会把不同的包发给不同的 pipe：</para>

      <programlisting>pipe 1000 config bw 1000Kbyte/s
pipe 4000 config bw 4000Kbyte/s
table 1 add x.x.x.x 1000
table 1 add x.x.x.y 4000
pipe tablearg ip from table(1) to any</programlisting>

      <para>修正了通过 TCP 进行的 NFS 连接无法在服务器发出 FIN 之后重连的问题。
	这一问题会影响使用 Solaris 的 NFS 服务器提供的服务。</para>

      <para>&man.ng.iface.4; Netgraph 节点支持 &man.altq.4; 了。</para>

      <para>默认禁用了在 &os; 中的
	&man.ip6.4; 协议栈中的广播包路径 MTU 发现功能，
	这使由于通过多播种的许多路由器来通知路径 MTU
	可能构成对于一台服务器的分布式拒绝服务攻击行为。
	这一功能可以通过新的 sysctl 变量
	<varname>net.inet6.ip6.mcast_pmtu</varname> 来重新启用。</para>

      <para>当 RTT 低于某一特定阈值时， TCP 带宽-延迟积限制功能会自动禁用。
	在 LAN 上这一优化是没有意义的， 因为时钟的粒度过粗，
	使得在计算最大带宽时会出问题。 新增的 sysctl 变量
	<varname>net.inet.tcp.inflight.rttthresh</varname>
	可以用来指定希望此功能起作用的以毫秒为单位的阈值，
	其默认值为 10ms。</para>
    </sect3>

    <sect3 id="disks">
      <title>磁盘及存储</title>

      <para>对 &man.amr.4; 驱动的性能进行了改进，
	并增加了完全的 64-位 DMA 支持。 尽管这一特性默认是启用的，
	但也还可以使用加载器变量
	<varname>hw.amr.force_sg32</varname> 来禁用，
	以方便调试。</para>

      <para>&man.amr.4; 驱动新增了 Linux LSI MegaRaid 工具所需的 &man.ioctl.2;
	请求支持， 以便在 &os; 的 Linux 模拟环境中使用它们。</para>

      <para>&man.ata.4; 驱动提供了针对某些在 48-位 模式下 DMA
	无法正常工作的控制器的缓解方法。 对于那些可疑的控制器，
	驱动程序会在访问超过 137GB 的区域时使用 PIO 模式。</para>

      <para>&man.ata.4; 驱动提供了对 ITE IT8211F IDE 控制器，
	以及 Promise PDC40718 和 PDC40719 芯片的支持，
	后两种芯片见于 Promise
	Fasttrak TX4300。</para>

      <para>&man.ata.4; 驱动支持以 DMA 方式将内核崩溃转存数据存入
	&man.ataraid.4; 设备了。</para>

      <para>&man.ataraid.4; 驱动支持
	JMicron ATA RAID 元数据了。</para>

      <para><literal>GEOM_LABEL</literal> class 支持
	Ext2FS、 NTFS 和 ReiserFS 了。</para>

      <para><literal>GEOM_MIRROR</literal> class 支持将内核崩溃转存数据，
	保存到其 GEOM providers 上了。</para>

      <para><literal>GEOM_MIRROR</literal> 和 <literal>GEOM_RAID3</literal>
	这两个 class 新增了对 sysctl 变量
	<varname>kern.geom.mirror.disconnect_on_failure</varname>
	和
	<varname>kern.geom.graid3.disconnect_on_failure</varname>
	的支持， 用以控制发生故障的盘是否断开。
	目前其默认值是 <literal>1</literal> 以保持之前的行为，
	而如果将它设置为 <literal>0</literal>， 则这样的盘不会被断开，
	而内核将继续尝试使用它们
	(只有第一次错误被记入日志)。
	如果有多个盘都存在故障， 但位置不同， 则这一功能将有助于恢复数据。
	出现故障的盘在 <command>gmirror list</command>
	和 <command>graid3 list</command> 的输出中仍可见， 但会标记上
	<literal>BROKEN</literal>。</para>

      <para><literal>GEOM_MIRROR</literal> 和 <literal>GEOM_RAID3</literal>
	这两个 class 采用了并发 I/O 请求来获得更好的同步性能。 新增的 sysctl 变量
	<varname>kern.geom.mirror.sync_requests</varname> 和
	<varname>kern.geom.raid3.sync_requests</varname>
	用于定义允许多少个并发的 I/O 请求。 此外， sysctl 变量
	<varname>kern.geom.mirror.reqs_per_sync</varname>、
	<varname>kern.geom.mirror.syncs_per_sec</varname>、
	<varname>kern.geom.raid3.reqs_per_sync</varname>， 以及
	<varname>kern.geom.raid3.syncs_per_sec</varname>
	则已经过时并删去。</para>

      <para>新增了 GEOM class <literal>GEOM_ZERO</literal>。
	它提供了一个非常大 (41PB) <filename>/dev/gzero</filename> 的 provider，
	主要可以用来进行性能测试。
	在收到 <literal>BIO_READ</literal> 请求时它会对
	<varname>bio_data</varname> 填零， 而 <literal>BIO_WRITE</literal>
	则什么都不做。</para>

      <para>&man.twa.4; 已更新至 3ware 网站发布的 9.3.0.1
	版本。</para>

      <para>&man.geli.8; 支持在挂接根文件系统之前加载密钥文件了。
	例如， 可以将下列配置加入 <filename>/boot/loader.conf</filename>
	来启用它：</para>

      <programlisting>geli_da0_keyfile0_load="YES"
geli_da0_keyfile0_type="da0:geli_keyfile0"
geli_da0_keyfile0_name="/boot/keys/da0.key0"
geli_da0_keyfile1_load="YES"
geli_da0_keyfile1_type="da0:geli_keyfile1"
geli_da0_keyfile1_name="/boot/keys/da0.key1"
geli_da0_keyfile2_load="YES"
geli_da0_keyfile2_type="da0:geli_keyfile2"
geli_da0_keyfile2_name="/boot/keys/da0.key2"

geli_da1s3a_keyfile0_load="YES"
geli_da1s3a_keyfile0_type="da1s3a:geli_keyfile0"
geli_da1s3a_keyfile0_name="/boot/keys/da1s3a.key"</programlisting>

      <para>新增了用以支持
	LSI MegaRAID SAS 系列控制器的驱动程序 &man.mfi.4;。</para>

      <para>新增了用以支持 HighPoint 的
	RocketRAID 232x 系列 RAID 控制器的驱动程序 &man.rr232x.4;。</para>
    </sect3>

    <sect3 id="fs">
      <title>文件系统</title>

      <para></para>
    </sect3>

    <sect3>
      <title>基本系统附带的第三方软件</title>

      <para><application>DRM</application>
	已更新至 DRI CVS 在 20051202 的快照版本。</para>
    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>用户环境的变动</title>

    <para>&man.bsnmpd.1; 工具支持 RFC 2790 所描述的主机资源
      MIB 了。</para>

    <para>&man.config.8; 工具新增了对 <literal>nocpu</literal>
      语句的支持， 其作用是取消先前的 <literal>cpu</literal>
      语句。</para>

    <para>如果指定内核配置文件所在的目录中存在名为 <filename>DEFAULTS</filename>
      内核配置文件， 则 &man.config.8; 工具会在读取内核配置文件之前，
      首先处理这个文件的内容。</para>

    <para>&man.csh.1; 工具支持 NLS 编录了。 注意需要安装
      <filename role="package">shells/tcsh_nls</filename> port 才能正常使用。</para>

    <para>&man.devd.8; 工具新增了用于指定配置文件的 <option>-f</option> 选项。</para>

    <para>&man.ftpd.8; 即使在没有使用 <option>-p</option> 参数的情况下，
      也会创建 PID 文件
      <filename>/var/run/ftpd.pid</filename> 了。</para>

    <para>&man.getfacl.1; 工具新增了 <option>-q</option> 参数，
      以避免显示每个文件头的中列出文件名、 属主与所属用户组的注释信息。</para>

    <para>&man.gvinum.8; 工具新增了用以完成对象改名，
      并将子盘从一个驱动器转入另一驱动器的命令。</para>

    <para>&man.jail.8; 工具新增了 <option>-J
	<replaceable>jid_file</replaceable></option> 选项的支持，
      用以指定 JidFile， 后者类似于 PidFile，
      包含 jailid、 路径、 主机名、 ip 以及用以启动 jail 的命令。</para>

    <para>&man.kdump.1; 工具新增了 <option>-H</option>
      参数， 表示让 kdump 显示包含 threadid 的附加字段。</para>

    <para>&man.kdump.1; 工具新增了 <option>-s</option>
      参数， 用于在显示中略去 I/O 数据。</para>

    <para>&man.ln.1; 工具新增了 <option>-F</option> 参数，
      表示在创建符号连接时删除空目录。</para>

    <para>&man.locate.1; 工具新增了 <option>-0</option> 参数，
      使其能够与 &man.xargs.1; 的 <option>-0</option> 参数联用。</para>

    <para>&man.ls.1; 工具新增了 <option>-I</option> 参数， 用以禁用超级用户自动加上的
      <option>-A</option> 参数。</para>

    <para>&man.mergemaster.8; 工具新增了 <option>-A</option> 参数，
      用于显式地指定传递给下层 Makefile 的架构名称。</para>

    <para>&man.moused.8; 服务新增了 <option>-H</option> 参数，
      用以启用虚拟的水平方向滚轮， 这一功能与通过
      <option>-V</option> 参数启用虚拟的垂直方向滚轮类似。</para>

    <para>&man.netstat.1; 新增了在内核采用 <literal>FAST_IPSEC</literal>
      而非 KAME IPSEC 协议栈时显示 &man.ipsec.4; 协议统计信息的能力。
      请注意 <command>netstat -s -p ipsec</command>
      的输出会随编译到内核中的协议栈不同而有所差异，
      因为这两个协议栈的统计信息并不相同。</para>

    <para>&man.periodic.8; 的 daily (每日执行) 脚本，
      新增了显示 &man.gmirror.8;、 &man.graid3.8;、
      &man.gstripe.8;， 以及 &man.gconcat.8; 设备的支持。
      请注意这些功能默认都处于禁用的状态。</para>

    <para>新增了一组 &man.pidfile.3; 函数， 用以提供可靠的 PID
      文件处理方法。 这些函数放到了
      <filename>libutil</filename> 中。</para>

    <para>&man.rfcomm.sppd.1; 能够支持在指定服务名的同时指定
      <option>-c</option> 选项和通道号了。
      支持的名字包括： DUN (拨号网络)、 FAX (传真)、
      LAN (使用 PPP 访问 LAN)， 以及 SP (串口)。</para>

    <para>新增了用于查看 UFS 文件系统中快照位置的 &man.snapinfo.8; 工具。</para>

    <para>加入了基于 OpenBSD 实现的 &man.strtonum.3; 库函数。 这是
      &man.strtoll.3; 的改进版本。</para>

    <para>修正了 &man.ypwhich.1; 工具中的一个导致
      <option>-m</option> 选项产生不正确的可用命名映射的 bug。</para>

    <sect3 id="rc-scripts">
      <title><filename>/etc/rc.d</filename> 脚本</title>

      <para>新增了 <filename>bluetooth</filename> 脚本。
	这个脚本会在设备连上/段开时， 由
	&man.devd.8; 调用并启动/停止对应的设备，
	而无须管理员手工干预。 这个脚本的默认配置参数在
	<filename>/etc/defaults/bluetooth.device.conf</filename>，
	这些默认值可以用
	<filename>/etc/bluetooth/<replaceable>$device</replaceable>.conf</filename>
	来覆盖
	(这里的 <replaceable>$device</replaceable> 是 <devicename>ubt0</devicename>、
	<devicename>btcc0</devicename>， 等等。)
	要了解进一步详情， 请参阅 &man.bluetooth.conf.5;。</para>

      <para>新增了 <filename>hcsecd</filename> 和
	<filename>sdpd</filename> 脚本，
	分别用于 &man.hcsecd.8; 和 &man.sdpd.8; 服务。
	在没有蓝牙设备接到系统上时， 也可以启动这些服务，
	但这两个服务都需要蓝牙 socket 层， 因此默认禁用了这两个服务。
	蓝牙 socket 曾必须通过模块加载， 或静态联编进内核，
	这两个服务才能运行。</para>

      <para>新增了用于
	&man.hostapd.8; 的 <filename>hostapd</filename> 脚本。</para>

      <para><filename>jail</filename> 脚本新增了
	<varname>jail_interface</varname> 选项和
	<varname>jail_<replaceable>jid</replaceable>_interface</varname>
	选项， 用以在给定的网络接口上创建 IP 别名。</para>

      <para><filename>netif</filename> 脚本新增了对
	<varname>ipv4_addrs_<replaceable>ifn</replaceable></varname>
	的支持， 它表示增加 CIDR 记法的 IPv4 地址。 例如：</para>

      <programlisting>ipv4_addrs_ed0="192.168.0.1/24 192.168.1.1-5/28"</programlisting>

      <para><filename>ppp-user</filename> 脚本改名为
	<filename>ppp</filename>。</para>
    </sect3>
  </sect2>

  <sect2>
    <title>基本系统包含的第三方软件</title>

    <para><application>BIND</application> 从 9.3.1
      更新到了 9.3.2。</para>

    <para><application>hostapd</application>
      由 0.3.9 版更新到了 0.4.8 版。</para>

    <para><application>GNU Troff</application>
      从 1.19 更新到了 1.19.2。</para>

    <para><application>sendmail</application> 由
      8.13.4 更新到了 8.13.6。</para>

    <para>时区数据库从
      <application>tzdata2005l</application> 版升级到了
      <application>tzdata2005r</application> 版。</para>

    <para><application>WPA Supplicant</application>
      由 0.3.9 版更新到了 0.4.8 版。</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages 套件基础结构</title>

    <para>&man.pkg.add.1; 命令新增了 <option>-P</option>
      参数， 它与 <option>-p</option> 参数类似，
      区别在于给定的前缀也会用于依赖的其他包。</para>

    <para>&man.pkg.add.1; 和 &man.pkg.create.1; 这两个工具新增了
      <option>-K</option> 参数， 表示将 package 默认保存至当前目录
      (如果有定义 <varname>PKGDIR</varname> 则保存在那个目录)。</para>

    <para>&man.pkg.create.1; 程序新增了 <option>-x</option>
      参数， 用以使用基本正则表达式来表示 package 的名字，
      <option>-E</option> 标志表示使用扩展正则表达式，
      而 <option>-G</option> 则表示精确匹配。</para>

    <para>&man.pkg.version.1; 工具新增了 <option>-o</option>
      参数， 用于显示在 package 生成时所记录的来源 (origin) 目录而不是其本身的名字，
      以及 <option>-O</option> 参数表示只列出所有注册来源为指定来源的 package。</para>

    <para>新增了 &man.portsnap.8; 工具 (<filename>sysutils/portsnap</filename>)
      到 &os; 基本系统中。 这是一个安全、 便于使用、
      快速、 轻量级的工具， 能够很好地帮助用户保持他们的 ports tree
      与官方版本同步。</para>

    <para>修正了 &man.portsnap.8; 工具在处理 <varname>HTTP_PROXY_AUTH</varname>
      时的 bug。</para>

    <para>从 <varname>local_startup</varname>
      目录启动脚本改为使用与基本系统同样的 &man.rcorder.8; 排序了。</para>

    <para>删去了从 Ports 套件安装的启动脚本的后缀。
      这意味着 <filename>foo.sh</filename>
      都将改名为 <filename>foo</filename>， 并且名为
      <filename>foo.ORG</filename> 的脚本也会被执行。
      您应重新安装所有安装了启动脚本的 package， 并清理
      <varname>local_startup</varname> 目录中多余的文件。</para>

    <para>新增了两个 <filename>rc.conf</filename> 变量，
      <varname>ldconfig_local_dirs</varname> 和
      <varname>ldconfig_local32_dirs</varname>。
      这两个变量用于指定本地的 &man.ldconfig.8; 目录列表。</para>

    <para><filename>pkg-plist</filename> 中的
      <command>@cwd</command> 命令支持不指定目录参数了。
      如果没有指定目录参数， 则它将把当前工作目录设置为
      <command>@cwd</command> 命令给出的第一个前缀。</para>
  </sect2>

  <sect2 id="releng">
    <title>发行版建造工程和功能集成</title>

    <para>新增了 <filename>/var/audit</filename> 目录以及
      <literal>audit</literal> 用户组。
      它们主要用于 TrustedBSD <application>OpenBSM</application>
      软件包， 这一软件包将在今后的版本中加入。</para>

    <para>支持的 <application>GNOME</application> 桌面环境
      (<filename role="package">x11/gnome2</filename>) 的版本，
      从 2.10.2 升级到了 2.12.3。</para>

    <para>支持的 <application>KDE</application> 桌面环境
      (<filename role="package">x11/kde2</filename>) 的版本，
      从 3.4.2 升级到了 3.5.1。</para>

    <para>支持的 <application>Perl</application> 解释器
      (<filename role="package">lang/perl5.8</filename>) 的版本，
      从 5.8.7 升级到了 5.8.8。</para>

    <para>支持的 <application>&xorg;</application> 视窗系统
      (<filename role="package">x11/xorg</filename>) 的版本，
      从 6.8.2 升级到了 6.9.0。</para>
  </sect2>

  <sect2 id="doc">
    <title>文档</title>

    <para></para>
  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>从先前版本的 &os; 升级</title>

  <para>通过源代码升级到 &os; &release.current;，
    则应使用 &os; 5.3-RELEASE 或更高版本。 使用旧版的系统的用户，
    如果想要升级到 &release.current;， 则需要首先升级到 &os; 5.3
    或更新的版本， 然后再升级到 &os; &release.current;。</para>

  <important>
    <para>很显然，升级 &os; 时，应该首先备份
      <emphasis>所有</emphasis> 数据和配置文件。</para>
  </important>
</sect1>
