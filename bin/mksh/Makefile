# $MidnightBSD: src/bin/mksh/Makefile,v 1.4 2009/03/27 01:53:38 laffer1 Exp $

MKSHDIR= ${.CURDIR}/../../contrib/mksh
.PATH: ${MKSHDIR}

PROG=	mksh

SRCS=	alloc.c edit.c eval.c exec.c expr.c funcs.c histrap.c \
	jobs.c lex.c main.c misc.c shf.c syn.c tree.c var.c

DEFS=	-std=c99
CFLAGS+=	${DEFS} -I${SRCDIR}
CFLAGS+=	-DHAVE_EXPSTMT=1 -DHAVE_ATTRIBUTE=1 \
		-DHAVE_ATTRIBUTE_BOUNDED=0 -DHAVE_ATTRIBUTE_USED=1 \
		-DHAVE_SYS_PARAM_H=1 -DHAVE_SYS_MKDEV_H=0 \
		-DHAVE_SYS_MMAN_H=1 -DHAVE_SYS_SYSMACROS_H=0 -DHAVE_LIBGEN_H=1 \
		-DHAVE_LIBUTIL_H=0 -DHAVE_PATHS_H=1 -DHAVE_STDBOOL_H=1 -DHAVE_STDINT_H=1 \
		-DHAVE_GRP_H=1 -DHAVE_ULIMIT_H=1 -DHAVE_VALUES_H=0 -DHAVE_RLIM_T=1  \
		-DHAVE_SIG_T=1 -DHAVE_SYS_SIGNAME=1 \
		-DHAVE_SYS_SIGLIST=1 -DHAVE_STRSIGNAL=0 -DHAVE_ARC4RANDOM=1 \
		-DHAVE_ARC4RANDOM_PUSH=0 -DHAVE_FLOCK_EX=1 -DHAVE_FLOCK_DECL=1 -DHAVE_SETLOCALE_CTYPE=1 \
		-DHAVE_LANGINFO_CODESET=1 \
		-DHAVE_REVOKE=1 -DHAVE_REVOKE_DECL=1 -DHAVE_SETMODE=1 -DHAVE_SETRESUGID=1 -DHAVE_SETGROUPS=1 \
		-DHAVE_STRCASESTR=1 -DHAVE_STRLCPY=1 -DHAVE_ARC4RANDOM_DECL=1 \
		-DHAVE_ARC4RANDOM_PUSH_DECL=1 -DHAVE_SYS_SIGLIST_DECL=1 \
		-DHAVE_PERSISTENT_HISTORY=1 -DHAVE_MKNOD=1
WARNS?=	6
MAN=	mksh.1 

LINKS=	${BINDIR}/mksh ${BINDIR}/rksh
LINKS+=	${BINDIR}/mksh ${BINDIR}/ksh
LINKS+=	${BINDIR}/mksh ${BINDIR}/sh
MLINKS=	mksh.1 rksh.1 mksh.1 ulimit.1 mksh.1 ksh.1

.include <bsd.prog.mk>
